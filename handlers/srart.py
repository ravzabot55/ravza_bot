# handlers/start.py
from aiogram import types, Dispatcher
from keyboards.reply import tillar
from aiogram.dispatcher.filters import Command

# Foydalanuvchi start bosganda ishlaydigan funksiya
t_user_lang = {}

async def start_handler(message: types.Message):
    await message.answer("ğŸ‘‡ Iltimos, tilni tanĞ»Ğ°Ğ½Ğ³:", reply_markup=tillar)  # Faqat Til tanlash chiqadi

# Til tanlaganda ushlab qolamiz
async def language_selected(message: types.Message):
    user_id = message.from_user.id
    lang = message.text
    t_user_lang[user_id] = lang

    if lang == "ğŸ‡ºğŸ‡¿ O'zbekcha":
        text = (
            "ğŸ•Œ ĞÑÑĞ°Ğ»Ğ¾Ğ¼Ñƒ Ğ°Ğ»Ğ°Ğ¹ĞºÑƒĞ¼ Ğ¼ÑƒÒ³Ñ‚Ğ°Ñ€Ğ°Ğ¼ Ğ·Ğ¸Ñ‘Ñ€Ğ°Ñ‚Ñ‡Ğ¸!\n\n"
            "Ğ¡Ğ¸Ğ· Ğ Ğ°Ğ²Ğ·Ğ°, ĞœĞ°ĞºĞºĞ° Ğ²Ğ° ĞœĞ°Ğ´Ğ¸Ğ½Ğ° Ñ…Ğ¸Ğ·Ğ¼Ğ°Ñ‚Ğ¸ Ğ±Ğ¾Ñ‚Ğ¸Ğ´Ğ°ÑĞ¸Ğ·.\n"
            "Ğ‘Ğ¾Ñ‚ Ğ¾Ñ€Ò›Ğ°Ğ»Ğ¸ Ğ Ğ°Ğ²Ğ·Ğ°Ğ³Ğ° Ğ½Ğ°Ğ²Ğ±Ğ°Ñ‚ Ğ¾Ğ»Ğ¸Ñˆ, Ğ¼ĞµÒ³Ğ¼Ğ¾Ğ½Ñ…Ğ¾Ğ½Ğ° Ñ…Ğ¸Ğ·Ğ¼Ğ°Ñ‚Ğ»Ğ°Ñ€Ğ¸ Ğ²Ğ° Ñ‚Ğ°Ğ¾Ğ¼Ğ»Ğ°Ñ€ Ò³Ğ°Ò›Ğ¸Ğ´Ğ° Ğ¼Ğ°ÑŠĞ»ÑƒĞ¼Ğ¾Ñ‚ Ğ¾Ğ»Ğ¸ÑˆĞ¸Ğ½Ğ³Ğ¸Ğ· Ğ¼ÑƒĞ¼ĞºĞ¸Ğ½.\n\n"
            "ğŸ“Œ Ğ Ğ°Ğ²Ğ·Ğ° Ñ…Ğ¸Ğ·Ğ¼Ğ°Ñ‚Ğ¸ Ğ½Ğ°Ñ€Ñ…Ğ¸: 5 SR\n"
            "ĞšĞ¸Ğ¼ĞºĞ¸ Ğ±Ğ¸Ğ·Ğ´Ğ°Ğ½ 5 SRĞ³Ğ° Ğ¾Ğ»Ğ¸Ğ±, ÑƒĞ½Ğ¸ 10 SR Ñ‘ĞºĞ¸ ÑƒĞ½Ğ´Ğ°Ğ½ ÑÒ›Ğ¾Ñ€Ğ¸ Ğ½Ğ°Ñ€Ñ…Ğ´Ğ° ÑĞ¾Ñ‚ÑĞ° â€” Ğ±Ğ¸Ğ· Ñ€Ğ¾Ğ·Ğ¸ ÑĞ¼Ğ°ÑĞ¼Ğ¸Ğ·.\n"
            "Ğ‘Ğ¸Ğ· Ğ·Ğ¸Ñ‘Ñ€Ğ°Ñ‚Ñ‡Ğ¸Ğ»Ğ°Ñ€Ğ³Ğ° ĞµĞ½Ğ³Ğ¸Ğ»Ğ»Ğ¸Ğº Ğ±ĞµÑ€Ğ¸ÑˆĞ½Ğ¸ Ğ¸ÑÑ‚Ğ°Ğ¹Ğ¼Ğ¸Ğ·, Ğ¼ÑƒÑˆĞºÑƒĞ»Ğ»Ğ¸Ğº ĞºĞµĞ»Ñ‚Ğ¸Ñ€Ğ¸ÑˆĞ½Ğ¸ ÑĞ¼Ğ°Ñ.\n\n"
            "ğŸ“œ Ò²Ğ°Ğ´Ğ¸Ñ:\nØ§Ù„Ù…Ø³Ù„Ù… Ø£Ø®Ùˆ Ø§Ù„Ù…Ø³Ù„Ù…ØŒ Ù„Ø§ ÙŠØ¸Ù„Ù…Ù‡ ÙˆÙ„Ø§ ÙŠØ³Ù„Ù…Ù‡\n"
            "â€œĞœÑƒÑÑƒĞ»Ğ¼Ğ¾Ğ½ â€” Ğ¼ÑƒÑÑƒĞ»Ğ¼Ğ¾Ğ½Ğ½Ğ¸Ğ½Ğ³ Ğ±Ğ¸Ñ€Ğ¾Ğ´Ğ°Ñ€Ğ¸Ğ´Ğ¸Ñ€. Ğ£Ğ½Ğ³Ğ° Ğ·ÑƒĞ»Ğ¼ Ò›Ğ¸Ğ»Ğ¼Ğ°Ğ¹Ğ´Ğ¸ Ğ²Ğ° Ñ‚Ğ°ÑˆĞ»Ğ°Ğ± Ò›ÑĞ¹Ğ¼Ğ°Ğ¹Ğ´Ğ¸.â€\n"
            "ğŸ“š Ğ Ğ¾Ğ²Ğ¸Ğ¹: Ğ˜Ğ¼Ğ¾Ğ¼ Ğ‘ÑƒÑ…Ğ¾Ñ€Ğ¸Ğ¹\n\n"
            "ğŸ“£ ĞœÑƒÒ³Ğ¸Ğ¼ ÑÑĞ»Ğ°Ñ‚Ğ¼Ğ°:\n"
            "Ğ“ÑƒÑ€ÑƒÒ³ Ñ€Ğ°Ò³Ğ±Ğ°Ñ€Ğ»Ğ°Ñ€Ğ¸ Ğ²Ğ° ÑƒĞ¼Ñ€Ğ° ÑˆĞ¸Ñ€ĞºĞ°Ñ‚Ğ¸ Ğ¼Ğ°ÑÑŠÑƒĞ»Ğ»Ğ°Ñ€Ğ¸Ğ³Ğ°:\n"
            "ĞœĞ°Ğ´Ğ¸Ğ½Ğ°Ğ¸ ĞœÑƒĞ½Ğ°Ğ²Ğ²Ğ°Ñ€Ğ°Ğ³Ğ° Ğ³ÑƒÑ€ÑƒÒ³Ğ¸Ğ½Ğ³Ğ¸Ğ· ĞºĞµĞ»Ğ¸ÑˆĞ¸Ğ³Ğ° 3â€“5 ĞºÑƒĞ½ Ò›Ğ¾Ğ»Ğ³Ğ°Ğ½Ğ´Ğ° Ğ²Ğ¸Ğ·Ğ°Ğ»Ğ°Ñ€Ğ½Ğ¸ Ğ±Ğ¸Ğ·Ğ³Ğ° ÑĞ±Ğ¾Ñ€Ğ¸Ğ½Ğ³.\n"
            "Ğ¡Ğ¸Ğ· ĞºĞµĞ»Ğ³ÑƒĞ½Ğ¸Ğ½Ğ³Ğ¸Ğ·Ğ³Ğ°Ñ‡Ğ° ÑˆÑƒ ÑĞ°Ğ½Ğ° ÑƒÑ‡ÑƒĞ½ Ğ½Ğ°Ğ²Ğ±Ğ°Ñ‚ Ğ¾Ğ»Ğ¸Ğ± Ò›ÑĞ¹Ğ¸Ğ»Ğ°Ğ´Ğ¸, Ğ¸Ğ½ÑˆĞ°ĞĞ»Ğ»Ğ¾Ò³.\n\n"
            "ğŸ‘‡ ÒšÑƒĞ¹Ğ¸Ğ´Ğ°Ğ³Ğ¸ Ğ¼ĞµĞ½Ñ Ğ¾Ñ€Ò›Ğ°Ğ»Ğ¸ Ğ±ÑĞ»Ğ¸Ğ¼Ğ½Ğ¸ Ñ‚Ğ°Ğ½Ğ»Ğ°Ğ½Ğ³:"
        )
        from keyboards.reply import menu_uz
        await message.answer(text, reply_markup=menu_uz)

    elif lang == "ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹":
        text = (
            "ğŸ•Œ Ğ£Ğ²Ğ°Ğ¶Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ¿Ğ°Ğ»Ğ¾Ğ¼Ğ½Ğ¸Ğº, Ğ´Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ!\n\n"
            "Ğ’Ñ‹ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ĞµÑÑŒ Ğ² Ğ±Ğ¾Ñ‚Ğµ Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ Ğ°ÑƒĞ´Ğ°Ñ‚ Ğ¸ Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ¸Ñ† Ğ² ĞœĞµĞºĞºĞµ Ğ¸ ĞœĞµĞ´Ğ¸Ğ½Ğµ.\n"
            "Ğ§ĞµÑ€ĞµĞ· Ğ±Ğ¾Ñ‚ Ğ²Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒÑÑ Ğ² Ğ Ğ°ÑƒĞ´Ğ°Ñ‚.\n\n"
            "ğŸ“Œ Ğ¦ĞµĞ½Ğ° ÑƒÑĞ»ÑƒĞ³Ğ¸ Ğ Ğ°ÑƒĞ´Ğ°Ñ‚: 5 SR\n"
            "ğŸ“œ Ğ¥Ğ°Ğ´Ğ¸Ñ:\nØ§Ù„Ù…Ø³Ù„Ù… Ø£Ø®Ùˆ Ø§Ù„Ù…Ø³Ù„Ù…ØŒ Ù„Ø§ ÙŠØ¸Ù„Ù…Ù‡ ÙˆÙ„Ø§ ÙŠØ³Ù„Ù…Ù‡\n"
            "ğŸ“š ĞŸĞµÑ€ĞµĞ´Ğ°Ğ» Ğ˜Ğ¼Ğ°Ğ¼ Ğ‘ÑƒÑ…Ğ°Ñ€Ğ¸\n\n"
            "ğŸ“£ Ğ’Ğ°Ğ¶Ğ½Ğ¾:\nĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ñ€Ğ¸ÑÑ‹Ğ»Ğ°Ğ¹Ñ‚Ğµ Ğ²Ğ¸Ğ·Ñ‹ Ğ·Ğ° 3â€“5 Ğ´Ğ½ĞµĞ¹ Ğ´Ğ¾ Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹."
        )
        from keyboards.reply import menu_ru
        await message.answer(text, reply_markup=menu_ru)

    elif lang == "ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©":
        text = (
            "ğŸ•Œ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ø²Ø§Ø¦Ø± Ø§Ù„ÙƒØ±ÙŠÙ…!\n\n"
            "Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ø¨ÙˆØª Ø®Ø¯Ù…Ø© Ø§Ù„Ø±ÙˆØ¶Ø© ÙˆØ§Ù„ÙÙ†Ø§Ø¯Ù‚ ÙÙŠ Ù…ÙƒØ© ÙˆØ§Ù„Ù…Ø¯ÙŠÙ†Ø©.\n"
            "ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø­Ø¬Ø² ÙÙŠ Ø§Ù„Ø±ÙˆØ¶Ø© ÙÙ‚Ø·.\n\n"
            "ğŸ“Œ Ø³Ø¹Ø± Ø®Ø¯Ù…Ø© Ø§Ù„Ø±ÙˆØ¶Ø©: 5 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ\n"
            "ğŸ“œ Ø§Ù„Ø­Ø¯ÙŠØ«:\nØ§Ù„Ù…Ø³Ù„Ù… Ø£Ø®Ùˆ Ø§Ù„Ù…Ø³Ù„Ù…ØŒ Ù„Ø§ ÙŠØ¸Ù„Ù…Ù‡ ÙˆÙ„Ø§ ÙŠØ³Ù„Ù…Ù‡\n"
            "ğŸ“š Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ\n\n"
            "ğŸ“£ ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù…:\nÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ£Ø´ÙŠØ±Ø§Øª Ù‚Ø¨Ù„ 3-5 Ø£ÙŠØ§Ù… Ù…Ù† ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©."
        )
        from keyboards.reply import menu_ar
        await message.answer(text, reply_markup=menu_ar)

# Handlerlarni roâ€˜yxatdan oâ€˜tkazamiz
def register_handlers_start(dp: Dispatcher):
    dp.register_message_handler(start_handler, Command("start"))
    dp.register_message_handler(language_selected, lambda message: message.text in ["ğŸ‡ºğŸ‡¿ O'zbekcha", "ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹", "ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"])
